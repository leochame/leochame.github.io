<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>研究札记 - Leochame</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="css/main.css">
    <link rel="icon" href="images/favicon.ico">
    <meta name="description" content="Leochame的研究札记，记录技术探索与深度研究">
    <meta name="keywords" content="Leochame, 研究札记, 经典论文, 技术研究, 学术探索">
</head>
<body>
<header class="header">
    <div class="container">
        <nav class="navbar navbar-expand-lg navbar-light">
            <div class="container-fluid">
                <a class="navbar-brand" href="index.html">Leochame</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="index.html">首页</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="index.html#featured-articles">推荐文章</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="tech.html">技术专栏</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="research.html">研究札记</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="about.html">关于我</a>
                        </li>
                        <li class="nav-item d-flex align-items-center">
                            <i class="bi bi-sun-fill theme-icon"></i>
                            <label class="theme-switch">
                                <input type="checkbox" id="theme-switch">
                                <span class="slider"></span>
                            </label>
                            <i class="bi bi-moon-fill theme-icon"></i>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </div>
</header>

<!-- 研究札记标题区域 -->
<section class="hero-section fade-in-up">
    <div class="container">
        <div class="row">
            <div class="col-12 text-center">
                <div class="hero-content">
                <h1>研究札记</h1>
                    <p class="lead">深入探究技术原理与学术前沿，记录我的研究思考与系统分析</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- 研究札记内容 -->
<section class="section-compact fade-in-up">
    <div class="container">
        <!-- 分类筛选 -->
        <div class="mb-5">
            <div class="d-flex flex-wrap gap-2 justify-content-center">
                        <button class="btn btn-outline-primary active" data-category="all">全部研究</button>
                        <button class="btn btn-outline-primary" data-category="经典论文">经典论文</button>
                        <button class="btn btn-outline-primary" data-category="MIT6.1810">系统课程</button>
                        <button class="btn btn-outline-primary" data-category="操作系统">操作系统</button>
                        <button class="btn btn-outline-primary" data-category="计算机基础">计算机基础</button>
                        <button class="btn btn-outline-primary" data-category="人工智能">人工智能</button>
                </div>
            </div>
            
        <!-- 研究札记列表 -->
        <div class="row" id="notes-container">
                <!-- 研究札记将通过JavaScript动态生成 -->
            </div>
            
        <!-- 分页 -->
        <div class="mt-5 d-flex justify-content-center">
                <nav aria-label="Page navigation">
                    <ul class="pagination">
                        <li class="page-item disabled">
                            <a class="page-link" href="#" aria-label="Previous">
                                <span aria-hidden="true">&laquo;</span>
                            </a>
                        </li>
                        <li class="page-item active"><a class="page-link" href="#">1</a></li>
                        <li class="page-item"><a class="page-link" href="#">2</a></li>
                        <li class="page-item"><a class="page-link" href="#">3</a></li>
                        <li class="page-item">
                            <a class="page-link" href="#" aria-label="Next">
                                <span aria-hidden="true">&raquo;</span>
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
</section>

<style>
    /* 研究札记页面样式 */
    .research-card {
        display: flex;
        border-radius: var(--radius-md);
        background-color: #fff;
        box-shadow: 0 3px 10px rgba(0,0,0,0.05);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        margin-bottom: 1.5rem;
        overflow: hidden;
    }
    
    .research-card:hover {
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    
    .research-card-left {
        width: 30%;
        padding: 1.5rem;
        background-color: var(--hover-color);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        text-align: center;
        border-right: 1px solid var(--border-color);
    }
    
    .research-card-right {
        width: 70%;
        padding: 1.5rem;
        display: flex;
        flex-direction: column;
    }
    
    .research-date {
        font-size: 0.9rem;
        color: var(--primary-color);
        margin-bottom: 0.5rem;
    }
    
    .research-category {
        display: inline-block;
        padding: 0.25rem 0.75rem;
        background-color: var(--primary-color);
        color: white;
        border-radius: 30px;
        font-size: 0.8rem;
        margin-bottom: 1rem;
    }
    
    .research-title {
        font-size: 1.25rem;
        font-weight: 600;
        margin-bottom: 0.75rem;
        color: var(--text-color);
    }
    
    .research-summary {
        color: var(--secondary-color);
        margin-bottom: 1rem;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
        flex-grow: 1;
    }
    
    .research-tags {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        margin-bottom: 1rem;
    }
    
    .research-tag {
        display: inline-block;
        padding: 0.2rem 0.5rem;
        background-color: var(--hover-color);
        color: var(--text-color);
        border-radius: 4px;
        font-size: 0.75rem;
    }
    
    .research-link {
        align-self: flex-end;
    }
    
    @media (max-width: 767px) {
        .research-card {
            flex-direction: column;
        }
        
        .research-card-left {
            width: 100%;
            padding: 1rem;
            border-right: none;
            border-bottom: 1px solid var(--border-color);
        }
        
        .research-card-right {
            width: 100%;
            padding: 1rem;
        }
    }
</style>

<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6">
                <div class="d-flex align-items-center mb-3">
                    <h5 class="me-3 mb-0">Leochame</h5>
                <div class="footer-social">
                    <a href="https://github.com/leochame" target="_blank"><i class="bi bi-github"></i></a>
                    <a href="https://juejin.cn/user/3672826532608270" target="_blank"><i class="bi bi-link-45deg"></i></a>
                    <a href="mailto:liulch.cn@gmail.com"><i class="bi bi-envelope"></i></a>
                </div>
            </div>
                <p class="small">后端开发工程师，专注于Java生态系统、系统架构设计与性能优化</p>
            </div>
            <div class="col-md-6">
                <div class="row">
                    <div class="col-6">
                        <h6>导航</h6>
                        <ul class="footer-links small">
                            <li><a href="tech.html">技术专栏</a></li>
                            <li><a href="research.html">研究札记</a></li>
                            <li><a href="about.html">关于我</a></li>
                        </ul>
                    </div>
                    <div class="col-6">
                        <h6>热门分类</h6>
                        <ul class="footer-links small">
                            <li><a href="tech.html?category=Java">Java开发</a></li>
                            <li><a href="tech.html?category=数据库">数据库</a></li>
                            <li><a href="research.html?category=操作系统">操作系统</a></li>
                            <li><a href="research.html?category=计算机基础">计算机基础</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="footer-bottom text-center mt-3">
            <p class="small mb-0">&copy; 2023-2025 Leochame 的技术博客。使用 <a href="https://pages.github.com/">GitHub Pages</a> 构建。</p>
        </div>
    </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" defer></script>
<script src="js/theme-switcher.js" defer></script>
<script src="js/articles.js" defer></script>
<script src="js/main.js" defer></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const notesContainer = document.getElementById('notes-container');
        const categoryButtons = document.querySelectorAll('.btn[data-category]');
        const pagination = document.querySelector('.pagination');
        let currentCategory = 'all';
        let currentPage = 1;
        const ITEMS_PER_PAGE = 10; // 每页显示10篇研究内容
        
        // 检查URL参数
        const urlParams = new URLSearchParams(window.location.search);
        const categoryParam = urlParams.get('category');
        if (categoryParam) {
            currentCategory = categoryParam;
            // 更新按钮状态
            categoryButtons.forEach(button => {
                if (button.getAttribute('data-category') === categoryParam) {
                    button.classList.add('active');
                } else {
                    button.classList.remove('active');
                }
            });
        }
        
        // 获取研究札记类型的文章
        function getResearchArticles() {
            // 只获取研究类文章 (isResearch = true)
            return articlesData.filter(article => article.isResearch === true)
                .sort((a, b) => new Date(b.date) - new Date(a.date));
        }
        
        // 渲染研究札记列表
        function renderResearch(category, page = 1) {
            notesContainer.innerHTML = '';
            
            const researchArticles = getResearchArticles();
            
            // 过滤分类
            const filteredResearch = category === 'all' 
                ? researchArticles 
                : researchArticles.filter(article => 
                    article.subCategory === category || 
                    article.mainCategory === category || 
                    (category === 'MIT6.1810' && article.subCategory.includes('MIT6.1810')));
            
            if (filteredResearch.length === 0) {
                notesContainer.innerHTML = '<div class="col-12"><div class="alert alert-info text-center">该分类下暂无研究内容</div></div>';
                renderPagination(1, 1);
                return;
            }
            
            // 计算分页数据
            const totalPages = Math.ceil(filteredResearch.length / ITEMS_PER_PAGE);
            currentPage = page > totalPages ? 1 : page; // 确保页码有效
            
            // 获取当前页的研究内容
            const startIndex = (currentPage - 1) * ITEMS_PER_PAGE;
            const endIndex = Math.min(startIndex + ITEMS_PER_PAGE, filteredResearch.length);
            const currentPageResearch = filteredResearch.slice(startIndex, endIndex);
            
            // 渲染当前页研究内容
            currentPageResearch.forEach(article => {
                const noteCol = document.createElement('div');
                noteCol.className = 'col-12';
                
                const noteCard = document.createElement('div');
                noteCard.className = 'research-card';
                
                // 构建研究札记内容
                noteCard.innerHTML = `
                    <div class="research-card-left">
                        <div class="research-date">${article.date}</div>
                        <div class="research-category">${article.mainCategory}</div>
                        <div class="research-platform">${article.platform}</div>
                    </div>
                    <div class="research-card-right">
                        <h3 class="research-title">${article.title}</h3>
                        <p class="research-summary">${article.summary}</p>
                        <div class="research-tags">
                            ${article.subCategory ? `<span class="research-tag">${article.subCategory}</span>` : ''}
                            <span class="research-tag">${article.mainCategory}</span>
                        </div>
                        <a href="${article.link}" class="btn btn-outline-primary btn-sm research-link" target="_blank">研读全文</a>
                    </div>
                `;
                
                noteCol.appendChild(noteCard);
                notesContainer.appendChild(noteCol);
            });
            
            // 更新分页
            renderPagination(currentPage, totalPages);
        }
        
        // 渲染分页组件
        function renderPagination(currentPage, totalPages) {
            pagination.innerHTML = '';
            
            // 前一页按钮
            const prevLi = document.createElement('li');
            prevLi.className = `page-item ${currentPage === 1 ? 'disabled' : ''}`;
            
            const prevLink = document.createElement('a');
            prevLink.className = 'page-link';
            prevLink.href = '#';
            prevLink.setAttribute('aria-label', 'Previous');
            prevLink.innerHTML = '<span aria-hidden="true">&laquo;</span>';
            
            if (currentPage > 1) {
                prevLink.addEventListener('click', function(e) {
                    e.preventDefault();
                    renderResearch(currentCategory, currentPage - 1);
                    // 滚动到页面顶部
                    window.scrollTo({top: 0, behavior: 'smooth'});
                });
            }
            
            prevLi.appendChild(prevLink);
            pagination.appendChild(prevLi);
            
            // 页码按钮
            const maxPageButtons = 5; // 最多显示的页码按钮数
            let startPage = Math.max(1, currentPage - Math.floor(maxPageButtons / 2));
            let endPage = Math.min(totalPages, startPage + maxPageButtons - 1);
            
            // 调整startPage，确保显示足够的页码按钮
            if (endPage - startPage + 1 < maxPageButtons && startPage > 1) {
                startPage = Math.max(1, endPage - maxPageButtons + 1);
            }
            
            // 第一页按钮（如果当前不是第一页且起始页不是第一页）
            if (startPage > 1) {
                const firstLi = document.createElement('li');
                firstLi.className = 'page-item';
                
                const firstLink = document.createElement('a');
                firstLink.className = 'page-link';
                firstLink.href = '#';
                firstLink.textContent = '1';
                
                firstLink.addEventListener('click', function(e) {
                    e.preventDefault();
                    renderResearch(currentCategory, 1);
                    // 滚动到页面顶部
                    window.scrollTo({top: 0, behavior: 'smooth'});
                });
                
                firstLi.appendChild(firstLink);
                pagination.appendChild(firstLi);
                
                // 如果第一页和起始页之间有间隔，添加省略号
                if (startPage > 2) {
                    const ellipsisLi = document.createElement('li');
                    ellipsisLi.className = 'page-item disabled';
                    
                    const ellipsisSpan = document.createElement('a');
                    ellipsisSpan.className = 'page-link';
                    ellipsisSpan.innerHTML = '&hellip;';
                    
                    ellipsisLi.appendChild(ellipsisSpan);
                    pagination.appendChild(ellipsisLi);
                }
            }
            
            // 页码按钮
            for (let i = startPage; i <= endPage; i++) {
                const pageLi = document.createElement('li');
                pageLi.className = `page-item ${i === currentPage ? 'active' : ''}`;
                
                const pageLink = document.createElement('a');
                pageLink.className = 'page-link';
                pageLink.href = '#';
                pageLink.textContent = i;
                
                if (i !== currentPage) {
                    pageLink.addEventListener('click', function(e) {
                        e.preventDefault();
                        renderResearch(currentCategory, i);
                        // 滚动到页面顶部
                        window.scrollTo({top: 0, behavior: 'smooth'});
                    });
                }
                
                pageLi.appendChild(pageLink);
                pagination.appendChild(pageLi);
            }
            
            // 如果结束页和最后一页之间有间隔，添加省略号
            if (endPage < totalPages - 1) {
                const ellipsisLi = document.createElement('li');
                ellipsisLi.className = 'page-item disabled';
                
                const ellipsisSpan = document.createElement('a');
                ellipsisSpan.className = 'page-link';
                ellipsisSpan.innerHTML = '&hellip;';
                
                ellipsisLi.appendChild(ellipsisSpan);
                pagination.appendChild(ellipsisLi);
            }
            
            // 最后一页按钮（如果当前不是最后一页且结束页不是最后一页）
            if (endPage < totalPages) {
                const lastLi = document.createElement('li');
                lastLi.className = 'page-item';
                
                const lastLink = document.createElement('a');
                lastLink.className = 'page-link';
                lastLink.href = '#';
                lastLink.textContent = totalPages;
                
                lastLink.addEventListener('click', function(e) {
                    e.preventDefault();
                    renderResearch(currentCategory, totalPages);
                    // 滚动到页面顶部
                    window.scrollTo({top: 0, behavior: 'smooth'});
                });
                
                lastLi.appendChild(lastLink);
                pagination.appendChild(lastLi);
            }
            
            // 下一页按钮
            const nextLi = document.createElement('li');
            nextLi.className = `page-item ${currentPage === totalPages ? 'disabled' : ''}`;
            
            const nextLink = document.createElement('a');
            nextLink.className = 'page-link';
            nextLink.href = '#';
            nextLink.setAttribute('aria-label', 'Next');
            nextLink.innerHTML = '<span aria-hidden="true">&raquo;</span>';
            
            if (currentPage < totalPages) {
                nextLink.addEventListener('click', function(e) {
                    e.preventDefault();
                    renderResearch(currentCategory, currentPage + 1);
                    // 滚动到页面顶部
                    window.scrollTo({top: 0, behavior: 'smooth'});
                });
            }
            
            nextLi.appendChild(nextLink);
            pagination.appendChild(nextLi);
            
            // 如果总页数小于等于1，隐藏分页组件
            const paginationContainer = pagination.parentElement;
            paginationContainer.style.display = totalPages <= 1 ? 'none' : 'flex';
        }
        
        // 初始化渲染
        renderResearch(currentCategory, currentPage);
        
        // 事件监听
        categoryButtons.forEach(button => {
            button.addEventListener('click', function() {
                categoryButtons.forEach(btn => btn.classList.remove('active'));
                this.classList.add('active');
                currentCategory = this.getAttribute('data-category');
                renderResearch(currentCategory, 1);
                
                // 更新URL参数，但不刷新页面
                const url = new URL(window.location);
                if (currentCategory === 'all') {
                    url.searchParams.delete('category');
                } else {
                    url.searchParams.set('category', currentCategory);
                }
                window.history.pushState({}, '', url);
            });
        });
    });
</script>
</body>
</html> 