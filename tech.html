<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>技术专栏 - Leochame</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="css/main.css">
    <link rel="icon" href="images/favicon.ico">
    <meta name="description" content="Leochame的技术专栏，分享后端开发技术文章">
    <meta name="keywords" content="Leochame, 技术专栏, Java, MySQL, 后端开发, 技术文章">
</head>
<body>
<header class="header">
    <div class="container">
        <nav class="navbar navbar-expand-lg navbar-light">
            <div class="container-fluid">
                <a class="navbar-brand" href="index.html">Leochame</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="index.html">首页</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="index.html#featured-articles">推荐文章</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="tech.html">技术专栏</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="research.html">研究札记</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="about.html">关于我</a>
                        </li>
                        <li class="nav-item d-flex align-items-center">
                            <i class="bi bi-sun-fill theme-icon"></i>
                            <label class="theme-switch">
                                <input type="checkbox" id="theme-switch">
                                <span class="slider"></span>
                            </label>
                            <i class="bi bi-moon-fill theme-icon"></i>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </div>
</header>

<!-- 技术专栏标题区域 -->
<section class="hero-section fade-in-up">
    <div class="container">
        <div class="row">
            <div class="col-12 text-center">
                <div class="hero-content">
                <h1>技术专栏</h1>
                    <p class="lead">深入研究后端开发技术，分享实战经验和最佳实践</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- 文章列表内容 -->
<section class="section-compact fade-in-up">
    <div class="container">
        <!-- 分类筛选 -->
        <div class="mb-5">
            <div class="d-flex flex-wrap gap-2 justify-content-center">
                        <button class="btn btn-outline-primary active" data-category="all">全部</button>
                        <button class="btn btn-outline-primary" data-category="Java">Java</button>
                        <button class="btn btn-outline-primary" data-category="操作系统">操作系统</button>
                        <button class="btn btn-outline-primary" data-category="数据库">数据库</button>
                        <button class="btn btn-outline-primary" data-category="计算机网络">计算机网络</button>
                        <button class="btn btn-outline-primary" data-category="计算机基础">计算机基础</button>
                        <button class="btn btn-outline-primary" data-category="人工智能">人工智能</button>
                        <button class="btn btn-outline-primary" data-category="大数据">大数据</button>
                </div>
            </div>

        <!-- 文章列表 -->
            <div class="row" id="article-container">
                <!-- 文章将通过JavaScript动态生成 -->
            </div>
            
        <!-- 分页 -->
        <div class="mt-5 d-flex justify-content-center">
                <nav aria-label="Page navigation">
                    <ul class="pagination">
                        <li class="page-item disabled">
                            <a class="page-link" href="#" aria-label="Previous">
                                <span aria-hidden="true">&laquo;</span>
                            </a>
                        </li>
                        <li class="page-item active"><a class="page-link" href="#">1</a></li>
                        <li class="page-item"><a class="page-link" href="#">2</a></li>
                        <li class="page-item"><a class="page-link" href="#">3</a></li>
                        <li class="page-item">
                            <a class="page-link" href="#" aria-label="Next">
                                <span aria-hidden="true">&raquo;</span>
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
</section>

<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6">
                <div class="d-flex align-items-center mb-3">
                    <h5 class="me-3 mb-0">Leochame</h5>
                <div class="footer-social">
                    <a href="https://github.com/leochame" target="_blank"><i class="bi bi-github"></i></a>
                    <a href="https://juejin.cn/user/3672826532608270" target="_blank"><i class="bi bi-link-45deg"></i></a>
                    <a href="mailto:liulch.cn@gmail.com"><i class="bi bi-envelope"></i></a>
                </div>
            </div>
                <p class="small">后端开发工程师，专注于Java生态系统、系统架构设计与性能优化</p>
            </div>
            <div class="col-md-6">
                <div class="row">
                    <div class="col-6">
                        <h6>导航</h6>
                        <ul class="footer-links small">
                            <li><a href="tech.html">技术专栏</a></li>
                            <li><a href="research.html">研究札记</a></li>
                            <li><a href="about.html">关于我</a></li>
                        </ul>
                    </div>
                    <div class="col-6">
                        <h6>热门分类</h6>
                        <ul class="footer-links small">
                            <li><a href="tech.html?category=Java">Java开发</a></li>
                            <li><a href="tech.html?category=数据库">数据库</a></li>
                            <li><a href="research.html?category=操作系统">操作系统</a></li>
                            <li><a href="research.html?category=计算机基础">计算机基础</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="footer-bottom text-center mt-3">
            <p class="small mb-0">&copy; 2023-2025 Leochame 的技术博客。使用 <a href="https://pages.github.com/">GitHub Pages</a> 构建。</p>
        </div>
    </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" defer></script>
<script src="js/theme-switcher.js" defer></script>
<script src="js/articles.js" defer></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const articleContainer = document.getElementById('article-container');
        const categoryButtons = document.querySelectorAll('.btn[data-category]');
        const pagination = document.querySelector('.pagination');
        let currentCategory = 'all';
        let currentPage = 1;
        const ITEMS_PER_PAGE = 6; // 每页显示6篇文章
        
        // 检查URL参数
        const urlParams = new URLSearchParams(window.location.search);
        const categoryParam = urlParams.get('category');
        if (categoryParam) {
            currentCategory = categoryParam;
            // 更新按钮状态
            categoryButtons.forEach(button => {
                if (button.getAttribute('data-category') === categoryParam) {
                    button.classList.add('active');
                } else {
                    button.classList.remove('active');
                }
            });
        }
        
        // 筛选属于技术专栏的文章（不包含研究札记的文章）
        function getTechArticles() {
            // 根据isResearch字段过滤，只获取非研究类文章
            return articlesData.filter(article => !article.isResearch)
                .sort((a, b) => new Date(b.date) - new Date(a.date));
        }
        
        // 渲染文章列表
        function renderArticles(category, page = 1) {
            articleContainer.innerHTML = '';
            
            // 获取技术专栏文章
            const techArticles = getTechArticles();
            
            // 过滤分类
            const filteredArticles = category === 'all' 
                ? techArticles 
                : techArticles.filter(article => article.mainCategory === category);
            
            if (filteredArticles.length === 0) {
                articleContainer.innerHTML = '<div class="col-12"><div class="alert alert-info text-center">该分类下暂无文章</div></div>';
                renderPagination(1, 1);
                return;
            }
            
            // 计算分页数据
            const totalPages = Math.ceil(filteredArticles.length / ITEMS_PER_PAGE);
            currentPage = page > totalPages ? 1 : page; // 确保页码有效
            
            // 获取当前页的文章
            const startIndex = (currentPage - 1) * ITEMS_PER_PAGE;
            const endIndex = Math.min(startIndex + ITEMS_PER_PAGE, filteredArticles.length);
            const currentPageArticles = filteredArticles.slice(startIndex, endIndex);
            
            // 渲染当前页文章
            currentPageArticles.forEach(article => {
                const articleCol = document.createElement('div');
                articleCol.className = 'col-md-6 col-lg-4 mb-4';
                
                const categoryDisplay = article.subCategory 
                    ? `${article.mainCategory} / ${article.subCategory}` 
                    : article.mainCategory;
                
                articleCol.innerHTML = `
                    <div class="content-card h-100">
                        <h3 class="article-title">
                            <a href="${article.link}" target="_blank">${article.title}</a>
                        </h3>
                        <div class="d-flex flex-wrap gap-2 mb-3">
                            <div class="d-flex align-items-center">
                                <i class="bi bi-journal-text me-2 text-primary"></i>
                                <span class="text-secondary small">${article.platform}</span>
                            </div>
                            <div class="d-flex align-items-center">
                                <i class="bi bi-calendar3 me-2 text-primary"></i>
                                <span class="text-secondary small">${article.date}</span>
                            </div>
                            <span class="badge bg-light text-primary">${categoryDisplay}</span>
                        </div>
                        <p class="text-secondary mb-4">${article.summary}</p>
                        <a href="${article.link}" class="btn btn-outline-primary btn-sm" target="_blank">阅读全文</a>
                    </div>
                `;
                
                articleContainer.appendChild(articleCol);
            });
            
            // 更新分页
            renderPagination(currentPage, totalPages);
        }
        
        // 渲染分页组件
        function renderPagination(currentPage, totalPages) {
            pagination.innerHTML = '';
            
            // 前一页按钮
            const prevLi = document.createElement('li');
            prevLi.className = `page-item ${currentPage === 1 ? 'disabled' : ''}`;
            
            const prevLink = document.createElement('a');
            prevLink.className = 'page-link';
            prevLink.href = '#';
            prevLink.setAttribute('aria-label', 'Previous');
            prevLink.innerHTML = '<span aria-hidden="true">&laquo;</span>';
            
            if (currentPage > 1) {
                prevLink.addEventListener('click', function(e) {
                    e.preventDefault();
                    renderArticles(currentCategory, currentPage - 1);
                });
            }
            
            prevLi.appendChild(prevLink);
            pagination.appendChild(prevLi);
            
            // 页码按钮
            const maxPageButtons = 5; // 最多显示的页码按钮数
            let startPage = Math.max(1, currentPage - Math.floor(maxPageButtons / 2));
            let endPage = Math.min(totalPages, startPage + maxPageButtons - 1);
            
            // 调整startPage，确保显示足够的页码按钮
            if (endPage - startPage + 1 < maxPageButtons && startPage > 1) {
                startPage = Math.max(1, endPage - maxPageButtons + 1);
            }
            
            // 第一页按钮（如果当前不是第一页且起始页不是第一页）
            if (startPage > 1) {
                const firstLi = document.createElement('li');
                firstLi.className = 'page-item';
                
                const firstLink = document.createElement('a');
                firstLink.className = 'page-link';
                firstLink.href = '#';
                firstLink.textContent = '1';
                
                firstLink.addEventListener('click', function(e) {
                    e.preventDefault();
                    renderArticles(currentCategory, 1);
                });
                
                firstLi.appendChild(firstLink);
                pagination.appendChild(firstLi);
                
                // 如果第一页和起始页之间有间隔，添加省略号
                if (startPage > 2) {
                    const ellipsisLi = document.createElement('li');
                    ellipsisLi.className = 'page-item disabled';
                    
                    const ellipsisSpan = document.createElement('a');
                    ellipsisSpan.className = 'page-link';
                    ellipsisSpan.innerHTML = '&hellip;';
                    
                    ellipsisLi.appendChild(ellipsisSpan);
                    pagination.appendChild(ellipsisLi);
                }
            }
            
            // 页码按钮
            for (let i = startPage; i <= endPage; i++) {
                const pageLi = document.createElement('li');
                pageLi.className = `page-item ${i === currentPage ? 'active' : ''}`;
                
                const pageLink = document.createElement('a');
                pageLink.className = 'page-link';
                pageLink.href = '#';
                pageLink.textContent = i;
                
                if (i !== currentPage) {
                    pageLink.addEventListener('click', function(e) {
                        e.preventDefault();
                        renderArticles(currentCategory, i);
                    });
                }
                
                pageLi.appendChild(pageLink);
                pagination.appendChild(pageLi);
            }
            
            // 如果结束页和最后一页之间有间隔，添加省略号
            if (endPage < totalPages - 1) {
                const ellipsisLi = document.createElement('li');
                ellipsisLi.className = 'page-item disabled';
                
                const ellipsisSpan = document.createElement('a');
                ellipsisSpan.className = 'page-link';
                ellipsisSpan.innerHTML = '&hellip;';
                
                ellipsisLi.appendChild(ellipsisSpan);
                pagination.appendChild(ellipsisLi);
            }
            
            // 最后一页按钮（如果当前不是最后一页且结束页不是最后一页）
            if (endPage < totalPages) {
                const lastLi = document.createElement('li');
                lastLi.className = 'page-item';
                
                const lastLink = document.createElement('a');
                lastLink.className = 'page-link';
                lastLink.href = '#';
                lastLink.textContent = totalPages;
                
                lastLink.addEventListener('click', function(e) {
                    e.preventDefault();
                    renderArticles(currentCategory, totalPages);
                });
                
                lastLi.appendChild(lastLink);
                pagination.appendChild(lastLi);
            }
            
            // 下一页按钮
            const nextLi = document.createElement('li');
            nextLi.className = `page-item ${currentPage === totalPages ? 'disabled' : ''}`;
            
            const nextLink = document.createElement('a');
            nextLink.className = 'page-link';
            nextLink.href = '#';
            nextLink.setAttribute('aria-label', 'Next');
            nextLink.innerHTML = '<span aria-hidden="true">&raquo;</span>';
            
            if (currentPage < totalPages) {
                nextLink.addEventListener('click', function(e) {
                    e.preventDefault();
                    renderArticles(currentCategory, currentPage + 1);
                });
            }
            
            nextLi.appendChild(nextLink);
            pagination.appendChild(nextLi);
            
            // 如果总页数小于等于1，隐藏分页组件
            const paginationContainer = pagination.parentElement;
            paginationContainer.style.display = totalPages <= 1 ? 'none' : 'flex';
        }
        
        // 初始化渲染
        renderArticles(currentCategory, currentPage);
        
        // 事件监听
        categoryButtons.forEach(button => {
            button.addEventListener('click', function() {
                categoryButtons.forEach(btn => btn.classList.remove('active'));
                this.classList.add('active');
                currentCategory = this.getAttribute('data-category');
                renderArticles(currentCategory, 1);
                
                // 更新URL参数，但不刷新页面
                const url = new URL(window.location);
                if (currentCategory === 'all') {
                    url.searchParams.delete('category');
                } else {
                    url.searchParams.set('category', currentCategory);
                }
                window.history.pushState({}, '', url);
            });
        });
    });
</script>
</body>
</html> 